<%- include('includes/head') %>
<body>
    <div class="container">

        <!-- SIDEBAR (mesmo do dashboard) -->
        <%- include('includes/navbar')%>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- TOPBAR (mesmo do dashboard) -->
            <%- include('includes/topbar')%>

            <!-- PAINEL PRINCIPAL - MEU CADERNO DE CAMPO -->
            <section class="dashboard-panel">
                <div class="panel-header">
                    <div class="page-title">
                        <h2 style="text-align: center;"><%=msg%></h2>
                        <h1>Meu Caderno<br>de Campo</h1>
                    </div>
                    <div class="panel-actions">
                        <button type="link" onclick="window.location.href='/novo-registro'" class="btn btn-primary">Novo Registro</button>
                        <button type="link" onclick="window.location.href='/novo-custo'" class="btn btn-outline">Novos Custos</button>
                    </div>
                </div>

                <!-- Filtros -->
                <form method="get" action="/caderno-campo" class="filtros-section" id="filtro-form">
                    <h3 class="filtros-title">Filtrar por</h3>
                    <p class="filtros-subtitle">Data</p>

                    <div class="filtros-fields">
                        <div class="filtro-field">
            <label for="filtro-data">Data</label>
            <input type="date" name="data" id="filtro-data" class="input-field" value="<%= dataFiltro || '' %>">
        </div>

        <button type="submit" id="btn-filtrar" class="btn btn-primary">
            Aplicar filtro
        </button>
        <button type="button" id="btn-filtrar" class="btn btn-primary">
            <a style="color:inherit; text-decoration:none;" href="/caderno-campo">Limpar filtro</a>
        </button>
    </div>
</form>

                <!-- Tabela de Atividades -->
                <div class="table-container">
                    <table class="atividades-table">
                        <thead>
                            <tr>
                                <th>Ações</th>
                                <th>Data</th>
                                <th>Tipo de Atividade</th>
                                <th>Detalhe</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% atividades.forEach(atividade => { %>
                            <tr>
                                <form method="post" action="/deletar-registro">
                                <td>
                                    <button type="submit" class="btn btn-primary">Deletar</button>
                                </td>
                                <td><%= atividade.data %></td>
                                <td><%= atividade.tipo %></td>
                                <td><%= atividade.dados %></td>
                                <input type="hidden" name="data" value="<%= atividade.data %>">
                                <input type="hidden" name="tipo" value="<%= atividade.tipo %>">
                                </form>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <script src="caderno-campo.js"></script>
</body>
</html>
